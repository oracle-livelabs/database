<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operational Property Graphs - Interactive Demo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --brand-yellow: #F1B13F;
            --slate-100: #697778;
            --page-bg: #F5F3F0;
            --white: #FFFFFF;
            --text-primary: #161513;
            --text-secondary: #6B6966;
            --border-color: #D3D3D1;
            --shadow-light: rgba(0, 0, 0, 0.08);
            --shadow-hover: rgba(0, 0, 0, 0.12);
            --focus-color: #C74634;
            --button-hover: #B13426;
            --code-bg: #1E1E1E;
            --success: #4CAF50;
            --info: #2196F3;
            --graph-node: #F1B13F;
            --graph-edge: #697778;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: var(--page-bg);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: var(--text-primary);
            font-size: 16px;
            line-height: 1.5;
        }

        h1 { font-size: 2.5rem; font-weight: 300; color: var(--text-primary); }
        h2 { font-size: 2rem; font-weight: 300; color: var(--text-primary); }
        h3 { font-size: 1.5rem; font-weight: 400; color: var(--text-primary); }
        h4 { font-size: 1.25rem; font-weight: 500; color: var(--text-primary); }
        p { color: var(--text-secondary); margin-bottom: 1rem; }
        small { font-size: 0.875rem; }

        /* Header */
        .header {
            background: var(--white);
            height: 56px;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-color);
            position: sticky; top: 0; z-index: 100;
        }
        .logo { display: flex; align-items: center; }
        .logo-svg { width: 80px; height: 32px; display: flex; align-items: center; justify-content: center; }
        .logo h1 { font-size: 1.25rem; font-weight: 400; color: var(--text-primary); }

        /* Progress */
        .progress-container { background: var(--white); padding: 24px; border-bottom: 1px solid var(--border-color); }
        .progress-steps { display: flex; justify-content: space-between; max-width: 1200px; margin: 0 auto; gap: 24px; }
        .step { text-align: center; cursor: pointer; transition: .2s; }
        .step-circle {
            width: 32px; height: 32px; background: var(--white); border: 2px solid var(--text-secondary);
            border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;
            font-weight: 500; font-size: .875rem; transition: .2s; margin-bottom: 8px;
        }
        .step.active .step-circle, .step.completed .step-circle {
            background: var(--brand-yellow); color: var(--text-primary); border-color: var(--brand-yellow);
        }
        .step-title { font-size: .875rem; color: var(--text-secondary); font-weight: 400; }
        .step.active .step-title { color: var(--text-primary); font-weight: 500; }

        /* Main */
        .main-content { flex: 1; padding: 32px 24px; max-width: 1200px; width: 100%; margin: 0 auto; }
        .demo-section { background: var(--white); border-radius: 8px; border: 1px solid var(--border-color); padding: 24px; box-shadow: 0 2px 4px var(--shadow-light); display: none; }
        .demo-section.active { display: block; }
        .section-header { margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid var(--border-color); }
        .section-header h2 { margin-bottom: 8px; }
        .section-header p { margin: 0; }

        .card { background: var(--white); border: 1px solid var(--border-color); border-radius: 8px; padding: 24px; box-shadow: 0 2px 4px var(--shadow-light); transition: .2s; }
        .card:hover { transform: translateY(-2px); box-shadow: 0 4px 8px var(--shadow-hover); }
        .grid { display: grid; gap: 24px; }
        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }

        .icon { width: 24px; height: 24px; display: inline-block; vertical-align: middle; fill: currentColor; }
        .icon-large { width: 48px; height: 48px; }

        .btn {
            padding: 12px 24px; background: var(--slate-100); color: var(--white); border: none; border-radius: 4px;
            font-size: 1rem; font-weight: 500; cursor: pointer; transition: background .2s; min-height: 44px;
            display: inline-flex; align-items: center; justify-content: center;
        }
        .btn:hover { background: #5a6869; }
        .btn:focus-visible { outline: 2px solid var(--focus-color); outline-offset: 2px; }
        .btn-primary { background: var(--brand-yellow); color: var(--text-primary); }
        .btn-primary:hover { background: #d99d2f; }
        .btn-secondary { background: var(--white); color: var(--text-primary); border: 1px solid var(--border-color); }
        .btn-secondary:hover { background: var(--page-bg); }

        .input { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 1rem; background: var(--white); transition: border-color .2s; min-height: 44px; }
        .input:focus { outline: none; border-color: var(--focus-color); }
        .input:focus-visible { outline: 2px solid var(--focus-color); outline-offset: -2px; }
        .input-group { display: flex; gap: 16px; margin-bottom: 24px; }
        .input-group .input { flex: 1; }

        #graphCanvas { width: 100%; height: 400px; background: var(--white); border-radius: 4px; border: 1px solid var(--border-color); position: relative; overflow: hidden; }

        .code-container { background: var(--code-bg); color: #d4d4d4; padding: 16px; border-radius: 4px; margin: 16px 0; overflow-x: auto; font-family: 'Courier New', monospace; font-size: 0.875rem; line-height: 1.5; }
        .keyword { color: #569cd6; } .string { color: #ce9178; } .comment { color: #6a9955; }

        .results-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 24px; margin-top: 24px; }
        .result-card { background: var(--white); border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; transition: .2s; }
        .result-card:hover { transform: translateY(-2px); box-shadow: 0 4px 8px var(--shadow-hover); }
        .similarity-score { display: inline-block; padding: 4px 12px; background: var(--brand-yellow); color: var(--text-primary); border-radius: 4px; font-size: 0.875rem; font-weight: 500; margin-bottom: 8px; }

        .use-case-card { background: var(--white); border: 1px solid var(--border-color); border-top: 4px solid var(--brand-yellow); border-radius: 8px; padding: 24px; transition: .2s; }
        .use-case-card:hover { transform: translateY(-2px); box-shadow: 0 4px 8px var(--shadow-hover); }
        .use-case-card.secondary { border-top-color: var(--slate-100); }
        .use-case-card.tertiary { border-top-color: var(--info); }

        .nav-buttons { display: flex; justify-content: space-between; margin-top: 32px; padding-top: 24px; border-top: 1px solid var(--border-color); }

        .tooltip { position: relative; display: inline-block; border-bottom: 1px dotted var(--text-secondary); cursor: help; }
        .tooltip .tooltiptext {
            visibility: hidden; width: 250px; background-color: var(--page-bg); color: var(--text-primary);
            padding: 12px; border-radius: 4px; border: 1px solid var(--border-color); position: absolute; z-index: 1;
            bottom: 125%; left: 50%; margin-left: -125px; opacity: 0; transition: opacity .2s; font-size: .875rem; box-shadow: 0 2px 4px var(--shadow-light);
        }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }

        .metric-item { background: var(--white); border: 1px solid var(--border-color); border-left: 4px solid var(--brand-yellow); border-radius: 8px; padding: 24px; text-align: center; }
        .metric-value { font-size: 2rem; font-weight: 300; color: var(--text-primary); margin-bottom: 8px; }
        .metric-label { font-size: .875rem; color: var(--text-secondary); }

        .loading { display: inline-block; width: 20px; height: 20px; border: 2px solid var(--border-color); border-radius: 50%; border-top-color: var(--brand-yellow); animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Graph-specific styles */
        .graph-node {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--graph-node);
            border: 2px solid var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            z-index: 10;
        }
        .graph-node:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 12px var(--shadow-hover);
        }
        .graph-node.selected {
            background: var(--focus-color);
            color: var(--white);
        }
        .graph-edge {
            position: absolute;
            background: var(--graph-edge);
            height: 2px;
            transform-origin: 0 50%;
            z-index: 1;
        }
        .graph-label {
            position: absolute;
            font-size: 0.75rem;
            color: var(--text-secondary);
            background: var(--white);
            padding: 2px 6px;
            border-radius: 3px;
            pointer-events: none;
            z-index: 15;
        }

        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
            .progress-steps { overflow-x: auto; padding-bottom: 8px; }
            .nav-buttons { flex-direction: column; gap: 16px; }
            h1 { font-size: 2rem; } h2 { font-size: 1.5rem; } h3 { font-size: 1.25rem; }
        }

        *:focus-visible { outline: 2px solid var(--focus-color); outline-offset: 2px; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

        .success-message { background: var(--white); border: 1px solid var(--success); border-radius: 8px; padding: 32px; text-align: center; margin-top: 24px; }
        .success-icon { width: 64px; height: 64px; margin: 0 auto 16px; color: var(--success); }

        .feature-list { list-style: none; padding: 0; margin: 24px 0; }
        .feature-list li { padding: 8px 0; display: flex; align-items: start; gap: 12px; }
        .feature-icon { width: 20px; height: 20px; flex-shrink: 0; color: var(--brand-yellow); margin-top: 2px; }

        .algorithm-card { background: var(--page-bg); border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; margin: 8px 0; cursor: pointer; transition: .2s; }
        .algorithm-card:hover { background: var(--white); transform: translateX(4px); }
        .algorithm-card h4 { margin-bottom: 4px; }
        .algorithm-card p { margin: 0; font-size: 0.875rem; }

        .path-highlight { background: var(--brand-yellow); opacity: 0.6; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-svg">
                <img src="theo.png" alt="Oracle Logo" style=" height: 40px; width: auto; max-width: 100%;">
            </div>
            <h1>Operational Property Graphs</h1>
        </div>
        <button class="btn btn-secondary" onclick="resetDemo()">Reset Demo</button>
    </header>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-steps">
            <div class="step active" onclick="goToStep(0)"><div class="step-circle">1</div><div class="step-title">Introduction</div></div>
            <div class="step" onclick="goToStep(1)"><div class="step-circle">2</div><div class="step-title">Graph Basics</div></div>
            <div class="step" onclick="goToStep(2)"><div class="step-circle">3</div><div class="step-title">Analytics</div></div>
            <div class="step" onclick="goToStep(3)"><div class="step-circle">4</div><div class="step-title">Use Cases</div></div>
            <div class="step" onclick="goToStep(4)"><div class="step-circle">5</div><div class="step-title">Code</div></div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- 0: Introduction -->
        <div class="demo-section active" id="section-0">
            <div class="section-header">
                <h2>Welcome to Oracle Graph</h2>
                <p>Explore complex relationships in data with simple, expressive SQL</p>
            </div>

            <div class="grid grid-2">
                <div class="card">
                    <h3>What is a Graph?</h3>
                    <p>
                        A graph is a collection of 
                        <span class="tooltip">vertices
                            <span class="tooltiptext">Also called nodes, representing entities like people, products, or places</span>
                        </span>
                        and 
                        <span class="tooltip">edges
                            <span class="tooltiptext">Relationships or connections between vertices</span>
                        </span>.
                        Each vertex represents an entity and each edge represents a relationship. Graphs help you discover, explore, and analyze relationships that you're missing in traditional data models.
                    </p>
                    <ul class="feature-list">
                        <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>Find indirect connections and paths</li>
                        <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>Identify clusters and communities</li>
                        <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>Power ML models with relationship features</li>
                        <li><svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg>Build knowledge graphs for AI</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Why Oracle Graph?</h3>
                    <p>Oracle Database 23ai brings powerful graph analytics directly to your data—no need for specialized tools or data movement.</p>
                    <ul class="feature-list">
                        <li><strong>80+ Algorithms:</strong> Pre-built analytics for paths, clusters, ranking</li>
                        <li><strong>SQL:2023 Support:</strong> Standard SQL syntax for graph queries</li>
                        <li><strong>Converged Database:</strong> Combine graph with relational, JSON, vector</li>
                        <li><strong>Enterprise Scale:</strong> Built-in optimizations for large graphs</li>
                    </ul>
                </div>
            </div>

            <div class="card" style="margin-top: 24px;">
                <h3>Key Benefits</h3>
                <div class="grid grid-3" style="margin-top: 16px;">
                    <div class="metric-item">
                        <h4>No Extra License</h4>
                        <p style="font-size:.875rem;">Available with any Oracle Database 19c+</p>
                    </div>
                    <div class="metric-item">
                        <h4>Enterprise Security</h4>
                        <p style="font-size:.875rem;">Highest Gartner security rating</p>
                    </div>
                    <div class="metric-item">
                        <h4>Unmatched Scale</h4>
                        <p style="font-size:.875rem;">Optimized for billions of edges</p>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <div></div>
                <button class="btn btn-primary" onclick="nextStep()">Explore Graph Concepts →</button>
            </div>
        </div>

        <!-- 1: Graph Basics -->
        <div class="demo-section" id="section-1">
            <div class="section-header">
                <h2>Interactive Graph Visualization</h2>
                <p>Explore how graphs reveal hidden connections in your data</p>
            </div>

            <div class="grid grid-2">
                <div class="card">
                    <h3>Graph Controls</h3>
                    <div style="margin: 16px 0;">
                        <label style="display:block;margin-bottom:8px;font-weight:500;">Interact with the graph:</label>
                        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;">
                            <button class="btn btn-primary" onclick="addNode()">Add Node</button>
                            <button class="btn" onclick="toggleConnectionMode()">Connect Nodes</button>
                            <button class="btn btn-secondary" onclick="clearGraph()">Clear</button>
                        </div>
                        <div id="graphStats" style="padding:16px;background:var(--page-bg);border-radius:4px;">
                            <p style="margin:0;"><strong>Vertices:</strong> <span id="nodeCount">0</span></p>
                            <p style="margin:0;"><strong>Edges:</strong> <span id="edgeCount">0</span></p>
                            <p style="margin:0;"><strong>Mode:</strong> <span id="modeIndicator">Add Nodes</span></p>
                        </div>
                    </div>
                    <div style="margin-top:16px;">
                        <button class="btn" onclick="loadSampleGraph('social')">Reset Social Network</button>
                        <button class="btn" onclick="loadSampleGraph('fraud')">Load Fraud Pattern</button>
                    </div>
                </div>

                <div class="card">
                    <h3>Social Network Example</h3>
                    <div id="graphCanvas"></div>
                    <p style="margin-top:16px;font-size:.875rem;">This social network shows how users are connected. Try adding more connections or creating new nodes!</p>
                </div>
            </div>

            <div class="card" style="margin-top: 24px;">
                <h3>Why Graphs Matter</h3>
                <div class="grid grid-2" style="margin-top: 16px;">
                    <div>
                        <h4>Traditional Databases Miss Connections</h4>
                        <p style="font-size:.875rem;">Relational databases store data in tables with rows and columns. While excellent for structured data, they struggle with complex relationships requiring multiple joins. Finding "friends of friends" or detecting circular dependencies becomes expensive and complex.</p>
                    </div>
                    <div>
                        <h4>Graphs Make Relationships First-Class</h4>
                        <p style="font-size:.875rem;">Graphs treat relationships as primary entities, not afterthoughts. This makes traversing connections lightning-fast. Questions like "What's the shortest path?" or "Who influences whom?" become simple queries instead of complex operations.</p>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 24px;">
                <h3>Graph Components Explained</h3>
                <div class="grid grid-3" style="margin-top: 16px;">
                    <div class="metric-item">
                        <h4>Vertices (Nodes)</h4>
                        <p style="font-size:.875rem;">Represent entities like customers, products, or locations. Each vertex can have properties (name, age, price).</p>
                    </div>
                    <div class="metric-item">
                        <h4>Edges (Relationships)</h4>
                        <p style="font-size:.875rem;">Connect vertices to show how entities relate: PURCHASED, FOLLOWS, MANAGES, LOCATED_AT.</p>
                    </div>
                    <div class="metric-item">
                        <h4>Properties</h4>
                        <p style="font-size:.875rem;">Both vertices and edges can have attributes. An edge might have a timestamp, weight, or confidence score.</p>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="previousStep()">← Back</button>
                <button class="btn btn-primary" onclick="nextStep()">Try Graph Analytics →</button>
            </div>
        </div>

        <!-- 2: Graph Analytics -->
        <div class="demo-section" id="section-2">
            <div class="section-header">
                <h2>Graph Analytics Algorithms</h2>
                <p>Experience 80+ pre-built algorithms for pattern discovery</p>
            </div>

            <div class="card">
                <h3>Algorithm Playground</h3>
                <p>Select an algorithm to see it in action:</p>
                
                <div class="grid grid-2" style="margin-top:16px;">
                    <div>
                        <div class="algorithm-card" onclick="runAlgorithm('shortestPath')">
                            <h4>Shortest Path</h4>
                            <p>Find the shortest route between two nodes</p>
                        </div>
                        <div class="algorithm-card" onclick="runAlgorithm('pageRank')">
                            <h4>PageRank</h4>
                            <p>Identify the most influential nodes</p>
                        </div>
                        <div class="algorithm-card" onclick="runAlgorithm('community')">
                            <h4>Community Detection</h4>
                            <p>Find clusters of related entities</p>
                        </div>
                        <div class="algorithm-card" onclick="runAlgorithm('centrality')">
                            <h4>Betweenness Centrality</h4>
                            <p>Identify bridge nodes in the network</p>
                        </div>
                    </div>
                    <div>
                        <div id="algorithmCanvas" style="height:300px;background:var(--white);border:1px solid var(--border-color);border-radius:4px;position:relative;overflow:hidden;"></div>
                        <div id="algorithmResults" style="margin-top:16px;padding:16px;background:var(--page-bg);border-radius:4px;min-height:100px;">
                            <p style="margin:0;">Select an algorithm to see results</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top:24px;">
                <h3>Pattern Matching with SQL:2023</h3>
                <p>Find complex patterns using simple SQL syntax:</p>
                <div class="code-container"><pre><span class="comment">-- Find fraud rings: accounts that share contact info</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM GRAPH_TABLE</span> ( fraud_graph
  <span class="keyword">MATCH</span> (a1:Account)-[s1:SHARES]->(c:ContactInfo)<-[s2:SHARES]-(a2:Account)
  <span class="keyword">WHERE</span> a1.account_id != a2.account_id
    <span class="keyword">AND</span> s1.info_type = <span class="string">'phone'</span>
    <span class="keyword">AND</span> s2.info_type = <span class="string">'phone'</span>
  <span class="keyword">COLUMNS</span> (a1.account_id <span class="keyword">AS</span> account1, 
           a2.account_id <span class="keyword">AS</span> account2,
           c.phone_number)
);</pre></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="previousStep()">← Back</button>
                <button class="btn btn-primary" onclick="nextStep()">Explore Use Cases →</button>
            </div>
        </div>

        <!-- 3: Use Cases -->
        <div class="demo-section" id="section-3">
            <div class="section-header">
                <h2>Real-World Use Cases</h2>
                <p>See how industries leverage graph analytics</p>
            </div>

            <div class="grid grid-3">
                <div class="use-case-card">
                    <h3>Financial Services</h3>
                    <p>Detect fraud patterns and money laundering</p>
                    <ul class="feature-list">
                        <li>Transaction pattern analysis</li>
                        <li>Fraud ring detection</li>
                        <li>Risk assessment networks</li>
                        <li>Customer 360° view</li>
                    </ul>
                    <button class="btn" onclick="toggleUseCase('financial')" style="margin-top:16px;">See How It Works</button>
                </div>

                <div class="use-case-card secondary">
                    <h3>Healthcare & Retail</h3>
                    <p>Find communities for targeted marketing</p>
                    <ul class="feature-list">
                        <li>Patient journey mapping</li>
                        <li>Drug interaction networks</li>
                        <li>Customer segmentation</li>
                        <li>Product recommendations</li>
                    </ul>
                    <button class="btn" onclick="toggleUseCase('healthcare')" style="margin-top:16px;">See How It Works</button>
                </div>

                <div class="use-case-card tertiary">
                    <h3>Manufacturing & Supply Chain</h3>
                    <p>Optimize dependencies and logistics</p>
                    <ul class="feature-list">
                        <li>Component dependencies</li>
                        <li>Supply chain optimization</li>
                        <li>Route planning</li>
                        <li>Impact analysis</li>
                    </ul>
                    <button class="btn" onclick="toggleUseCase('supply')" style="margin-top:16px;">See How It Works</button>
                </div>
            </div>

            <!-- Expandable Use Case Details -->
            <div id="financial-detail" class="card" style="display:none;margin-top:24px;">
                <h3>Financial Fraud Detection with Graphs</h3>
                <div class="grid grid-2" style="margin-top:16px;">
                    <div>
                        <h4>The Challenge</h4>
                        <p>Fraudsters create complex networks of fake accounts, shared contact information, and circular transactions. Traditional rule-based systems miss these sophisticated patterns.</p>
                        
                        <h4>Graph Solution</h4>
                        <p>Graphs naturally represent these relationships. A simple query can find accounts that share phone numbers, addresses, or have suspicious circular money flows.</p>
                        
                        <div class="code-container" style="margin-top:16px;"><pre><span class="comment">-- Find accounts sharing contact info</span>
<span class="keyword">MATCH</span> (a1:Account)-[:USES]->(contact)<-[:USES]-(a2:Account)
<span class="keyword">WHERE</span> a1 != a2
<span class="keyword">RETURN</span> a1, a2, contact</pre></div>
                    </div>
                    <div>
                        <div style="background:var(--page-bg);padding:24px;border-radius:8px;text-align:center;">
                            <h4>Fraud Ring Pattern</h4>
                            <svg viewBox="0 0 300 200" style="width:100%;max-width:300px;">
                                <!-- Central fraudulent account -->
                                <circle cx="150" cy="100" r="20" fill="#C74634" stroke="#fff" stroke-width="2"/>
                                <text x="150" y="105" text-anchor="middle" fill="#fff" font-size="12">F1</text>
                                
                                <!-- Connected accounts -->
                                <circle cx="80" cy="50" r="18" fill="#F1B13F" stroke="#fff" stroke-width="2"/>
                                <text x="80" y="55" text-anchor="middle" fill="#161513" font-size="11">A1</text>
                                
                                <circle cx="220" cy="50" r="18" fill="#F1B13F" stroke="#fff" stroke-width="2"/>
                                <text x="220" y="55" text-anchor="middle" fill="#161513" font-size="11">A2</text>
                                
                                <circle cx="80" cy="150" r="18" fill="#F1B13F" stroke="#fff" stroke-width="2"/>
                                <text x="80" y="155" text-anchor="middle" fill="#161513" font-size="11">A3</text>
                                
                                <circle cx="220" cy="150" r="18" fill="#F1B13F" stroke="#fff" stroke-width="2"/>
                                <text x="220" y="155" text-anchor="middle" fill="#161513" font-size="11">A4</text>
                                
                                <!-- Edges showing money flow -->
                                <line x1="98" y1="58" x2="132" y2="92" stroke="#697778" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <line x1="202" y1="58" x2="168" y2="92" stroke="#697778" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <line x1="132" y1="108" x2="98" y2="142" stroke="#697778" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <line x1="168" y1="108" x2="202" y2="142" stroke="#697778" stroke-width="2" marker-end="url(#arrowhead)"/>
                                
                                <!-- Circular flow -->
                                <path d="M 95 140 Q 150 170 205 140" fill="none" stroke="#C74634" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowhead-red)"/>
                                
                                <!-- Arrow markers -->
                                <defs>
                                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#697778"/>
                                    </marker>
                                    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#C74634"/>
                                    </marker>
                                </defs>
                            </svg>
                            <p style="margin-top:16px;font-size:.875rem;">Circular money transfers between connected accounts indicate potential fraud</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="healthcare-detail" class="card" style="display:none;margin-top:24px;">
                <h3>Healthcare & Retail Analytics with Graphs</h3>
                <div class="grid grid-2" style="margin-top:16px;">
                    <div>
                        <h4>Patient Journey Mapping</h4>
                        <p>Understand how patients move through the healthcare system. Track referrals, treatments, and outcomes to optimize care pathways and reduce readmissions.</p>
                        
                        <h4>Customer Segmentation</h4>
                        <p>Find communities of customers with similar preferences. Use purchase patterns and product relationships to create targeted marketing campaigns.</p>
                        
                        <div style="margin-top:16px;padding:16px;background:var(--page-bg);border-radius:4px;">
                            <p style="margin:0;font-size:.875rem;"><strong>Key Benefits:</strong></p>
                            <ul style="margin:8px 0 0 20px;font-size:.875rem;">
                                <li>Reduce treatment delays by 35%</li>
                                <li>Increase campaign ROI by 40%</li>
                                <li>Identify at-risk patients early</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <div style="background:var(--page-bg);padding:24px;border-radius:8px;text-align:center;">
                            <h4>Drug Interaction Network</h4>
                            <svg viewBox="0 0 300 200" style="width:100%;max-width:300px;">
                                <!-- Drug nodes -->
                                <circle cx="150" cy="50" r="20" fill="#2196F3" stroke="#fff" stroke-width="2"/>
                                <text x="150" y="55" text-anchor="middle" fill="#fff" font-size="11">Drug A</text>
                                
                                <circle cx="80" cy="100" r="20" fill="#2196F3" stroke="#fff" stroke-width="2"/>
                                <text x="80" y="105" text-anchor="middle" fill="#fff" font-size="11">Drug B</text>
                                
                                <circle cx="220" cy="100" r="20" fill="#2196F3" stroke="#fff" stroke-width="2"/>
                                <text x="220" y="105" text-anchor="middle" fill="#fff" font-size="11">Drug C</text>
                                
                                <circle cx="150" cy="150" r="20" fill="#4CAF50" stroke="#fff" stroke-width="2"/>
                                <text x="150" y="155" text-anchor="middle" fill="#fff" font-size="11">Drug D</text>
                                
                                <!-- Interaction edges -->
                                <line x1="135" y1="65" x2="95" y2="85" stroke="#C74634" stroke-width="3"/>
                                <text x="115" y="72" font-size="10" fill="#C74634">Danger</text>
                                
                                <line x1="165" y1="65" x2="205" y2="85" stroke="#F1B13F" stroke-width="2"/>
                                <text x="185" y="72" font-size="10" fill="#697778">Caution</text>
                                
                                <line x1="100" y1="100" x2="200" y2="100" stroke="#4CAF50" stroke-width="2"/>
                                <text x="150" y="95" font-size="10" fill="#4CAF50">Safe</text>
                                
                                <line x1="95" y1="115" x2="135" y2="135" stroke="#4CAF50" stroke-width="2"/>
                                <line x1="165" y1="135" x2="205" y2="115" stroke="#4CAF50" stroke-width="2"/>
                            </svg>
                            <p style="margin-top:16px;font-size:.875rem;">Graph analysis reveals critical drug interactions and safe combinations</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="supply-detail" class="card" style="display:none;margin-top:24px;">
                <h3>Supply Chain Optimization with Graphs</h3>
                <div class="grid grid-2" style="margin-top:16px;">
                    <div>
                        <h4>Component Dependency Analysis</h4>
                        <p>Map the entire supply chain as a graph. Each supplier, component, and product becomes a node. Dependencies become edges, revealing critical paths and bottlenecks.</p>
                        
                        <h4>Impact Assessment</h4>
                        <p>When a supplier fails or component shortage occurs, instantly see all affected products and alternative paths. Calculate risks and optimize routes in real-time.</p>
                        
                        <div class="code-container" style="margin-top:16px;"><pre><span class="comment">-- Find single points of failure</span>
<span class="keyword">MATCH</span> p = (supplier)-[:SUPPLIES*1..5]->(product)
<span class="keyword">WITH</span> supplier, <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> product) <span class="keyword">AS</span> impact
<span class="keyword">WHERE</span> impact > 10
<span class="keyword">RETURN</span> supplier, impact</pre></div>
                    </div>
                    <div>
                        <div style="background:var(--page-bg);padding:24px;border-radius:8px;text-align:center;">
                            <h4>Supply Chain Network</h4>
                            <svg viewBox="0 0 300 250" style="width:100%;max-width:300px;">
                                <!-- Suppliers -->
                                <rect x="20" y="20" width="60" height="30" fill="#697778" rx="4"/>
                                <text x="50" y="40" text-anchor="middle" fill="#fff" font-size="11">Supplier A</text>
                                
                                <rect x="120" y="20" width="60" height="30" fill="#697778" rx="4"/>
                                <text x="150" y="40" text-anchor="middle" fill="#fff" font-size="11">Supplier B</text>
                                
                                <rect x="220" y="20" width="60" height="30" fill="#C74634" rx="4"/>
                                <text x="250" y="40" text-anchor="middle" fill="#fff" font-size="11">Supplier C</text>
                                <text x="250" y="10" text-anchor="middle" fill="#C74634" font-size="10">⚠ At Risk</text>
                                
                                <!-- Components -->
                                <circle cx="75" cy="100" r="18" fill="#F1B13F" stroke="#fff" stroke-width="2"/>
                                <text x="75" y="105" text-anchor="middle" fill="#161513" font-size="11">Chip</text>
                                
                                <circle cx="150" cy="100" r="18" fill="#F1B13F" stroke="#fff" stroke-width="2"/>
                                <text x="150" y="105" text-anchor="middle" fill="#161513" font-size="11">Board</text>
                                
                                <circle cx="225" cy="100" r="18" fill="#F1B13F" stroke="#fff" stroke-width="2"/>
                                <text x="225" y="105" text-anchor="middle" fill="#161513" font-size="11">Display</text>
                                
                                <!-- Products -->
                                <rect x="50" y="180" width="80" height="30" fill="#4CAF50" rx="4"/>
                                <text x="90" y="200" text-anchor="middle" fill="#fff" font-size="11">Phone Model X</text>
                                
                                <rect x="170" y="180" width="80" height="30" fill="#4CAF50" rx="4"/>
                                <text x="210" y="200" text-anchor="middle" fill="#fff" font-size="11">Tablet Model Y</text>
                                
                                <!-- Dependencies -->
                                <line x1="50" y1="50" x2="70" y2="82" stroke="#697778" stroke-width="2"/>
                                <line x1="150" y1="50" x2="150" y2="82" stroke="#697778" stroke-width="2"/>
                                <line x1="250" y1="50" x2="230" y2="82" stroke="#C74634" stroke-width="3" stroke-dasharray="4,2"/>
                                
                                <line x1="80" y1="118" x2="85" y2="180" stroke="#697778" stroke-width="2"/>
                                <line x1="150" y1="118" x2="120" y2="180" stroke="#697778" stroke-width="2"/>
                                <line x1="150" y1="118" x2="180" y2="180" stroke="#697778" stroke-width="2"/>
                                <line x1="220" y1="118" x2="215" y2="180" stroke="#C74634" stroke-width="3" stroke-dasharray="4,2"/>
                            </svg>
                            <p style="margin-top:16px;font-size:.875rem;">Graph reveals supply chain risks and alternative paths when disruptions occur</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top:24px;">
                <h3>Knowledge Graphs & AI</h3>
                <p>Enhance AI models with relationship context:</p>
                <div class="grid grid-2" style="margin-top:16px;">
                    <div>
                        <h4>RAG Enhancement</h4>
                        <p style="font-size:.875rem;">Make retrieval-augmented generation more powerful with connection-aware similarity search, combining vector embeddings with graph relationships.</p>
                    </div>
                    <div>
                        <h4>Integrated ML Workflows</h4>
                        <p style="font-size:.875rem;">Build better ML models by adding relationship-derived features. Graph-boosted neural networks make more accurate predictions.</p>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="previousStep()">← Back</button>
                <button class="btn btn-primary" onclick="nextStep()">View Code Examples →</button>
            </div>
        </div>

        <!-- 4: Code Examples -->
        <div class="demo-section" id="section-4">
            <div class="section-header">
                <h2>Implementation Examples</h2>
                <p>Get started with Oracle Graph using these code snippets</p>
            </div>

            <div class="card">
                <h3>1. Create a Property Graph</h3>
                <div class="code-container"><pre><span class="comment">-- Create a property graph from existing tables</span>
<span class="keyword">CREATE PROPERTY GRAPH</span> social_network
  <span class="keyword">VERTEX TABLES</span> (
    users <span class="keyword">KEY</span> (user_id) 
    <span class="keyword">PROPERTIES</span> (name, email, joined_date)
  )
  <span class="keyword">EDGE TABLES</span> (
    follows <span class="keyword">KEY</span> (follow_id)
    <span class="keyword">SOURCE KEY</span> (follower_id) <span class="keyword">REFERENCES</span> users(user_id)
    <span class="keyword">DESTINATION KEY</span> (following_id) <span class="keyword">REFERENCES</span> users(user_id)
    <span class="keyword">PROPERTIES</span> (follow_date)
  );</pre></div>
            </div>

            <div class="card" style="margin-top:24px;">
                <h3>2. Pattern Matching with SQL:2023</h3>
                <div class="code-container"><pre><span class="comment">-- Find mutual connections between users</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM GRAPH_TABLE</span> ( social_network
  <span class="keyword">MATCH</span> (u1:users)-[:follows]->(mutual:users)<-[:follows]-(u2:users)
  <span class="keyword">WHERE</span> u1.user_id = 123 
    <span class="keyword">AND</span> u2.user_id = 456
  <span class="keyword">COLUMNS</span> (mutual.name, mutual.email)
);</pre></div>
            </div>

            <div class="card" style="margin-top:24px;">
                <h3>3. Run Graph Algorithms (Python)</h3>
                <div class="code-container"><pre><span class="keyword">import</span> oracledb
<span class="keyword">from</span> oracle_graph <span class="keyword">import</span> Graph

<span class="comment"># Connect and load graph</span>
conn = oracledb.connect(<span class="string">"user/password@host:port/service"</span>)
graph = Graph(conn, <span class="string">"social_network"</span>)

<span class="comment"># Run PageRank algorithm</span>
pagerank_results = graph.pagerank(
    damping_factor=<span class="string">0.85</span>,
    max_iterations=<span class="string">100</span>,
    tolerance=<span class="string">0.0001</span>
)

<span class="comment"># Find shortest paths</span>
shortest_path = graph.shortest_path(
    source_vertex=<span class="string">"user_123"</span>,
    target_vertex=<span class="string">"user_456"</span>
)</pre></div>
            </div>

            <div class="card" style="margin-top:24px;">
                <h3>4. Combine Graph with Vector Search</h3>
                <div class="code-container"><pre><span class="comment">-- Find similar products considering purchase relationships</span>
<span class="keyword">SELECT</span> 
    p2.product_name,
    <span class="keyword">VECTOR_DISTANCE</span>(p2.embedding, p1.embedding, COSINE) <span class="keyword">AS</span> similarity,
    <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> co_purchases
<span class="keyword">FROM</span> products p1, products p2,
     <span class="keyword">GRAPH_TABLE</span> ( purchase_graph
       <span class="keyword">MATCH</span> (c:customer)-[:purchased]->(p1:product),
              (c:customer)-[:purchased]->(p2:product)
       <span class="keyword">WHERE</span> p1.product_id = :target_product
       <span class="keyword">COLUMNS</span> (p2.product_id)
     ) g
<span class="keyword">WHERE</span> p2.product_id = g.product_id
<span class="keyword">GROUP BY</span> p2.product_name, p2.embedding, p1.embedding
<span class="keyword">ORDER BY</span> similarity, co_purchases <span class="keyword">DESC</span>;</pre></div>
            </div>

            <div class="card" style="margin-top:24px;background:var(--page-bg);">
                <h3>Resources & Documentation</h3>
                <div class="grid grid-3" style="margin-top:16px;">
                    <a href="https://docs.oracle.com/en/database/oracle/property-graph/index.html" target="_blank" style="text-decoration:none;">
                        <div class="metric-item" style="cursor:pointer;"><h4>Graph Developer Guide</h4></div>
                    </a>
                    <a href="https://www.oracle.com/database/integrated-graph-database/" target="_blank" style="text-decoration:none;">
                        <div class="metric-item" style="cursor:pointer;"><h4>Product Page</h4></div>
                    </a>
                    <a href="https://livelabs.oracle.com/pls/apex/r/dbpm/livelabs/view-workshop?wid=3978" target="_blank" style="text-decoration:none;">
                        <div class="metric-item" style="cursor:pointer;"><h4>Try a LiveLab</h4></div>
                    </a>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="previousStep()">← Back</button>
                <button class="btn btn-primary" onclick="completeDemo()">Complete Demo ✓</button>
            </div>
        </div>
    </main>

    <script>
        // Demo state
        let currentStep = 0;
        const totalSteps = 5;
        
        // Graph state
        let nodes = [];
        let edges = [];
        let selectedNode = null;
        let connectionMode = false;
        let nodeIdCounter = 1;

        // Navigation
        function goToStep(step) { 
            if(step >= 0 && step < totalSteps) { 
                currentStep = step; 
                updateUI(); 
            } 
        }
        
        function nextStep() { 
            if(currentStep < totalSteps - 1) { 
                currentStep++; 
                updateUI(); 
            } 
        }
        
        function previousStep() { 
            if(currentStep > 0) { 
                currentStep--; 
                updateUI(); 
            } 
        }
        
        function updateUI() {
            document.querySelectorAll('.demo-section').forEach((s, i) => 
                s.classList.toggle('active', i === currentStep)
            );
            document.querySelectorAll('.step').forEach((st, i) => {
                st.classList.remove('active', 'completed');
                if(i < currentStep) st.classList.add('completed');
                else if(i === currentStep) st.classList.add('active');
            });
            
            // Initialize graph canvas when on step 1
            if(currentStep === 1) {
                if (!document.getElementById('graphCanvas').hasChildNodes()) {
                    initializeGraphCanvas();
                    // Pre-load social network graph
                    setTimeout(() => loadSampleGraph('social'), 200);
                }
            }
            // Initialize algorithm canvas when on step 2
            if(currentStep === 2 && !document.getElementById('algorithmCanvas').hasChildNodes()) {
                initializeAlgorithmCanvas();
            }
        }

        // Graph functionality
        function initializeGraphCanvas() {
            const canvas = document.getElementById('graphCanvas');
            canvas.addEventListener('click', handleCanvasClick);
        }

        function handleCanvasClick(e) {
            const canvas = document.getElementById('graphCanvas');
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            if(!connectionMode && e.target === canvas) {
                // Add new node at click position
                createNode(x, y);
            }
        }

        function createNode(x, y, id = null) {
            const canvas = document.getElementById('graphCanvas');
            const node = document.createElement('div');
            node.className = 'graph-node';
            node.id = id || `node-${nodeIdCounter++}`;
            node.textContent = nodes.length + 1;
            node.style.left = (x - 20) + 'px';
            node.style.top = (y - 20) + 'px';
            
            node.addEventListener('click', handleNodeClick);
            
            canvas.appendChild(node);
            nodes.push({id: node.id, element: node, x, y});
            updateGraphStats();
        }

        function handleNodeClick(e) {
            e.stopPropagation();
            const node = e.target;
            
            if(connectionMode) {
                if(!selectedNode) {
                    selectedNode = node;
                    node.classList.add('selected');
                } else if(selectedNode !== node) {
                    // Create edge
                    createEdge(selectedNode, node);
                    selectedNode.classList.remove('selected');
                    selectedNode = null;
                }
            }
        }

        function createEdge(node1, node2) {
            const canvas = document.getElementById('graphCanvas');
            const rect1 = node1.getBoundingClientRect();
            const rect2 = node2.getBoundingClientRect();
            const canvasRect = canvas.getBoundingClientRect();
            
            const x1 = rect1.left - canvasRect.left + rect1.width/2;
            const y1 = rect1.top - canvasRect.top + rect1.height/2;
            const x2 = rect2.left - canvasRect.left + rect2.width/2;
            const y2 = rect2.top - canvasRect.top + rect2.height/2;
            
            const length = Math.sqrt(Math.pow(x2-x1, 2) + Math.pow(y2-y1, 2));
            const angle = Math.atan2(y2-y1, x2-x1) * 180 / Math.PI;
            
            const edge = document.createElement('div');
            edge.className = 'graph-edge';
            edge.style.width = length + 'px';
            edge.style.left = x1 + 'px';
            edge.style.top = y1 + 'px';
            edge.style.transform = `rotate(${angle}deg)`;
            
            canvas.appendChild(edge);
            edges.push({from: node1.id, to: node2.id, element: edge});
            updateGraphStats();
        }

        function addNode() {
            const canvas = document.getElementById('graphCanvas');
            const rect = canvas.getBoundingClientRect();
            const x = Math.random() * (rect.width - 40) + 20;
            const y = Math.random() * (rect.height - 40) + 20;
            createNode(x, y);
        }

        function toggleConnectionMode() {
            connectionMode = !connectionMode;
            document.getElementById('modeIndicator').textContent = connectionMode ? 'Connect Nodes' : 'Add Nodes';
            if(selectedNode) {
                selectedNode.classList.remove('selected');
                selectedNode = null;
            }
        }

        function clearGraph() {
            const canvas = document.getElementById('graphCanvas');
            canvas.innerHTML = '';
            nodes = [];
            edges = [];
            nodeIdCounter = 1;
            selectedNode = null;
            updateGraphStats();
        }

        function updateGraphStats() {
            document.getElementById('nodeCount').textContent = nodes.length;
            document.getElementById('edgeCount').textContent = edges.length;
        }

        function loadSampleGraph(type) {
            clearGraph();
            const canvas = document.getElementById('graphCanvas');
            const rect = canvas.getBoundingClientRect();
            
            if(type === 'social') {
                // Create social network pattern
                const positions = [
                    {x: rect.width/2, y: rect.height/2},
                    {x: rect.width/2 - 100, y: rect.height/2 - 80},
                    {x: rect.width/2 + 100, y: rect.height/2 - 80},
                    {x: rect.width/2 - 100, y: rect.height/2 + 80},
                    {x: rect.width/2 + 100, y: rect.height/2 + 80}
                ];
                
                positions.forEach(pos => createNode(pos.x, pos.y));
                
                // Create connections
                setTimeout(() => {
                    createEdge(nodes[0].element, nodes[1].element);
                    createEdge(nodes[0].element, nodes[2].element);
                    createEdge(nodes[0].element, nodes[3].element);
                    createEdge(nodes[0].element, nodes[4].element);
                    createEdge(nodes[1].element, nodes[2].element);
                    createEdge(nodes[3].element, nodes[4].element);
                }, 100);
            } else if(type === 'fraud') {
                // Create fraud ring pattern
                const centerX = rect.width/2;
                const centerY = rect.height/2;
                const radius = 100;
                
                for(let i = 0; i < 6; i++) {
                    const angle = (i * 60) * Math.PI / 180;
                    const x = centerX + radius * Math.cos(angle);
                    const y = centerY + radius * Math.sin(angle);
                    createNode(x, y);
                }
                
                // Create ring connections
                setTimeout(() => {
                    for(let i = 0; i < 6; i++) {
                        createEdge(nodes[i].element, nodes[(i+1)%6].element);
                    }
                    // Add central suspicious connection
                    createEdge(nodes[0].element, nodes[3].element);
                }, 100);
            }
        }

        // Algorithm demonstrations
        function initializeAlgorithmCanvas() {
            const canvas = document.getElementById('algorithmCanvas');
            // Create sample graph for algorithms
            createAlgorithmGraph();
        }

        function createAlgorithmGraph() {
            const canvas = document.getElementById('algorithmCanvas');
            canvas.innerHTML = ''; // Clear existing content
            
            // Create a fixed graph for algorithm demonstrations
            const positions = [
                {x: 50, y: 150, id: 'A'},
                {x: 150, y: 50, id: 'B'},
                {x: 150, y: 250, id: 'C'},
                {x: 250, y: 150, id: 'D'},
                {x: 350, y: 50, id: 'E'},
                {x: 350, y: 250, id: 'F'}
            ];
            
            positions.forEach(pos => {
                const node = document.createElement('div');
                node.className = 'graph-node';
                node.id = `algo-${pos.id}`;
                node.textContent = pos.id;
                node.style.left = (pos.x - 20) + 'px';
                node.style.top = (pos.y - 20) + 'px';
                canvas.appendChild(node);
            });
            
            // Create edges
            const connections = [
                ['A', 'B'], ['A', 'C'], ['B', 'D'], 
                ['C', 'D'], ['D', 'E'], ['D', 'F']
            ];
            
            connections.forEach(([from, to]) => {
                const node1 = document.getElementById(`algo-${from}`);
                const node2 = document.getElementById(`algo-${to}`);
                if(node1 && node2) {
                    const x1 = parseInt(node1.style.left) + 20;
                    const y1 = parseInt(node1.style.top) + 20;
                    const x2 = parseInt(node2.style.left) + 20;
                    const y2 = parseInt(node2.style.top) + 20;
                    
                    const length = Math.sqrt(Math.pow(x2-x1, 2) + Math.pow(y2-y1, 2));
                    const angle = Math.atan2(y2-y1, x2-x1) * 180 / Math.PI;
                    
                    const edge = document.createElement('div');
                    edge.className = 'graph-edge';
                    edge.style.width = length + 'px';
                    edge.style.left = x1 + 'px';
                    edge.style.top = y1 + 'px';
                    edge.style.transform = `rotate(${angle}deg)`;
                    canvas.appendChild(edge);
                }
            });
        }

        function runAlgorithm(type) {
            const results = document.getElementById('algorithmResults');
            const canvas = document.getElementById('algorithmCanvas');
            
            // Reset highlighting
            canvas.querySelectorAll('.graph-node').forEach(n => {
                n.style.background = 'var(--graph-node)';
                n.style.color = 'var(--text-primary)';
            });
            
            switch(type) {
                case 'shortestPath':
                    // Highlight shortest path from A to F
                    ['A', 'C', 'D', 'F'].forEach(id => {
                        const node = document.getElementById(`algo-${id}`);
                        if(node) {
                            node.style.background = 'var(--focus-color)';
                            node.style.color = 'var(--white)';
                        }
                    });
                    results.innerHTML = `
                        <h4>Shortest Path Results</h4>
                        <p>Path from A to F: A → C → D → F</p>
                        <p>Total distance: 3 hops</p>
                        <p>Algorithm: Dijkstra's shortest path</p>
                    `;
                    break;
                    
                case 'pageRank':
                    // Show PageRank scores
                    const scores = {D: 0.28, B: 0.18, C: 0.18, A: 0.14, E: 0.11, F: 0.11};
                    Object.entries(scores).forEach(([id, score]) => {
                        const node = document.getElementById(`algo-${id}`);
                        if(node) {
                            const intensity = Math.floor(255 * (1 - score * 2));
                            node.style.background = `rgb(241, ${intensity}, 63)`;
                        }
                    });
                    results.innerHTML = `
                        <h4>PageRank Results</h4>
                        <p>Node D: 0.28 (highest influence)</p>
                        <p>Node B: 0.18</p>
                        <p>Node C: 0.18</p>
                        <p>Damping factor: 0.85, Iterations: 20</p>
                    `;
                    break;
                    
                case 'community':
                    // Show communities
                    ['A', 'B', 'C', 'D'].forEach(id => {
                        const node = document.getElementById(`algo-${id}`);
                        if(node) node.style.background = 'var(--info)';
                    });
                    ['E', 'F'].forEach(id => {
                        const node = document.getElementById(`algo-${id}`);
                        if(node) node.style.background = 'var(--success)';
                    });
                    results.innerHTML = `
                        <h4>Community Detection Results</h4>
                        <p>Community 1: Nodes A, B, C, D</p>
                        <p>Community 2: Nodes E, F</p>
                        <p>Algorithm: Louvain modularity</p>
                    `;
                    break;
                    
                case 'centrality':
                    // Highlight central node
                    document.getElementById('algo-D').style.background = 'var(--focus-color)';
                    document.getElementById('algo-D').style.color = 'var(--white)';
                    results.innerHTML = `
                        <h4>Betweenness Centrality Results</h4>
                        <p>Node D: 0.65 (highest centrality)</p>
                        <p>Critical bridge connecting communities</p>
                        <p>Removal would disconnect the graph</p>
                    `;
                    break;
            }
        }

        // Use case demos
        function toggleUseCase(type) {
            const details = {
                'financial': 'financial-detail',
                'healthcare': 'healthcare-detail',
                'supply': 'supply-detail'
            };
            
            const detailId = details[type];
            const element = document.getElementById(detailId);
            
            if (element) {
                // Hide all other details
                Object.values(details).forEach(id => {
                    if (id !== detailId) {
                        document.getElementById(id).style.display = 'none';
                    }
                });
                
                // Toggle current detail
                if (element.style.display === 'none') {
                    element.style.display = 'block';
                    element.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                } else {
                    element.style.display = 'none';
                }
            }
        }

        // Misc functions
        function resetDemo() {
            currentStep = 0;
            updateUI();
            clearGraph();
            const demo = document.getElementById('useCaseDemo');
            if(demo) demo.style.display = 'none';
        }

        function completeDemo() {
            const section = document.getElementById('section-4');
            const div = document.createElement('div');
            div.className = 'success-message';
            div.innerHTML = `
                <svg class="success-icon" viewBox="0 0 64 64">
                    <circle cx="32" cy="32" r="30" fill="none" stroke="currentColor" stroke-width="2"/>
                    <path d="M20 32l8 8 16-16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h2 style="margin-bottom:8px;">Demo Complete!</h2>
                <p>You've successfully explored Oracle Graph capabilities.</p>
                <div style="margin-top:24px;display:flex;gap:16px;justify-content:center;">
                    <button class="btn btn-secondary" onclick="resetDemo()">Restart Demo</button>
                    <a href="https://www.oracle.com/database/integrated-graph-database/" target="_blank">
                        <button class="btn btn-primary">Learn More</button>
                    </a>
                </div>
            `;
            section.appendChild(div);
            div.scrollIntoView({behavior: 'smooth', block: 'center'});
        }

        // Initialize
        function initDemo() { 
            setupKeyboardNavigation();
        }
        
        function setupKeyboardNavigation() {
            document.addEventListener('keydown', (e) => {
                if(e.key === 'ArrowRight') nextStep();
                else if(e.key === 'ArrowLeft') previousStep();
                else if(e.key >= '1' && e.key <= '5') goToStep(parseInt(e.key) - 1);
            });
        }

        // Progress persistence
        function saveProgress() { 
            try { 
                localStorage.setItem('oracleGraphDemoStep', currentStep);
            } catch(e) {} 
        }
        
        function loadProgress() { 
            try { 
                const s = localStorage.getItem('oracleGraphDemoStep'); 
                if(s !== null) { 
                    currentStep = parseInt(s); 
                    updateUI(); 
                } 
            } catch(e) {} 
        }
        
        window.addEventListener('DOMContentLoaded', () => {
            initDemo();
            loadProgress();
        });
        
        setInterval(saveProgress, 5000);
    </script>
</body>
</html>