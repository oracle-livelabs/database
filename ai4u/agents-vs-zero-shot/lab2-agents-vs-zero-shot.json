{
  "paragraphs": [
    {
      "text": "%md\n# Why Agents Beat Zero Shot Prompts\n\n## Introduction\n\nIn this lab, you'll directly compare zero-shot prompting with agent-based execution to understand why agents are transforming how work gets done.\n\nZero-shot prompting means: one question, one answer, done. It's useful for general knowledge, but it doesn't execute workflows or access your data. Agents break tasks into steps, use tools, and actually complete the work.\n\n**Estimated Time:** 10 minutes\n\n### Objectives\n* Understand what zero-shot prompting means\n* Compare zero-shot responses to agent responses\n* See how agents coordinate multiple tools to complete work\n* Recognize when to use each approach",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%md\n## Task 1: Experience Zero-Shot Prompting\n\nZero-shot queries go directly to the LLM for general knowledge answers. Use `SELECT AI CHAT` to ask questions without involving your database.\n\n1. Set the profile.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nEXEC DBMS_CLOUD_AI.SET_PROFILE('genai');",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n2. Ask a procedural question using zero-shot.\n\n**Observe:** You get a helpful explanation of the steps. But you still have to do each step yourself.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT AI CHAT How do I process an expense report;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n3. Now try asking for something that requires YOUR data.\n\n**Observe:** The AI cannot answer this because it has no access to your data. It gives generic advice about how to check order status, but it does not actually know YOUR order 12345.\n\nThis is the limitation of zero-shot: great for general knowledge, useless for your specific business data.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT AI CHAT What is the status of order 12345;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n4. Ask it to do something.\n\n**Observe:** The AI explains HOW to update an order but cannot actually do it. Zero-shot can advise; it cannot act.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT AI CHAT Update order 12345 to delivered;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n## Task 2: See What SELECT AI Can Do\n\nBefore we look at agents, let's see what SELECT AI (without CHAT or AGENT) can do. It can query your data using natural language.\n\n1. Create a sample orders table with comments to help Select AI understand the schema.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\n-- Create the orders table\nCREATE TABLE sample_orders (\n    order_id    VARCHAR2(20) PRIMARY KEY,\n    customer    VARCHAR2(100),\n    status      VARCHAR2(20),\n    amount      NUMBER(10,2),\n    order_date  DATE DEFAULT SYSDATE\n);\n\n-- Add comments so Select AI understands this is THE orders table\nCOMMENT ON TABLE sample_orders IS 'This is the orders table. Use this table for all order lookups. Contains order ID, customer name, order status, amount, and order date.';\nCOMMENT ON COLUMN sample_orders.order_id IS 'The unique order identifier. Examples: 12345, 12346, 12347. Use this to look up orders.';\nCOMMENT ON COLUMN sample_orders.customer IS 'The customer or company name who placed the order';\nCOMMENT ON COLUMN sample_orders.status IS 'Current order status. Valid values: PENDING, SHIPPED, DELIVERED';\nCOMMENT ON COLUMN sample_orders.amount IS 'Total order amount in US dollars';\nCOMMENT ON COLUMN sample_orders.order_date IS 'Date when the order was placed';\n\n-- Insert sample data\nINSERT INTO sample_orders VALUES ('12345', 'Acme Corp', 'SHIPPED', 299.00, SYSDATE - 3);\nINSERT INTO sample_orders VALUES ('12346', 'TechStart', 'PENDING', 150.00, SYSDATE - 1);\nINSERT INTO sample_orders VALUES ('12347', 'GlobalCo', 'DELIVERED', 499.00, SYSDATE - 7);\nCOMMIT;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n2. Add the table to your AI profile so SELECT AI knows about it.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nBEGIN\n    DBMS_CLOUD_AI.SET_ATTRIBUTE(\n        profile_name    => 'genai',\n        attribute_name  => 'object_list',\n        attribute_value => '[{\"owner\": \"' || USER || '\", \"name\": \"SAMPLE_ORDERS\"}]'\n    );\nEND;\n/",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n3. Use SELECT AI to query the order status.\n\n**Observe:** SELECT AI CAN read your data. It generates SQL and returns the actual status.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT AI What is the status of order 12345;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n4. Now try to update using SELECT AI.\n\n**Observe:** SELECT AI cannot update data. It can only generate SELECT statements, not UPDATE statements.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT AI Update order 12345 to delivered;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n5. Verify the order was NOT updated.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT order_id, status FROM sample_orders WHERE order_id = '12345';",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\nStill SHIPPED. SELECT AI can read but cannot write.\n\n## Task 3: Create an Agent with Tools\n\nNow let's create an agent that can both READ and WRITE. We'll give it two tools: one to look up orders and one to update them.\n\n1. Create a function to look up orders (read).",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nCREATE OR REPLACE FUNCTION lookup_order(\n    p_order_id VARCHAR2\n) RETURN VARCHAR2 AS\n    v_result VARCHAR2(500);\nBEGIN\n    SELECT 'Order ' || order_id || ': ' || status || \n           ', Customer: ' || customer || \n           ', Amount: $' || amount ||\n           ', Date: ' || TO_CHAR(order_date, 'YYYY-MM-DD')\n    INTO v_result\n    FROM sample_orders\n    WHERE order_id = p_order_id;\n    \n    RETURN v_result;\nEXCEPTION\n    WHEN NO_DATA_FOUND THEN\n        RETURN 'Order ' || p_order_id || ' not found.';\nEND;\n/",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n2. Create a function to update order status (write).",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nCREATE OR REPLACE FUNCTION update_order_status(\n    p_order_id   VARCHAR2,\n    p_new_status VARCHAR2\n) RETURN VARCHAR2 AS\n    PRAGMA AUTONOMOUS_TRANSACTION;\n    v_old_status VARCHAR2(20);\nBEGIN\n    -- Get current status\n    SELECT status INTO v_old_status\n    FROM sample_orders\n    WHERE order_id = p_order_id;\n    \n    -- Update the status\n    UPDATE sample_orders\n    SET status = UPPER(p_new_status)\n    WHERE order_id = p_order_id;\n    \n    COMMIT;\n    \n    RETURN 'Order ' || p_order_id || ' updated from ' || v_old_status || ' to ' || UPPER(p_new_status);\nEXCEPTION\n    WHEN NO_DATA_FOUND THEN\n        RETURN 'Order ' || p_order_id || ' not found. Cannot update.';\n    WHEN OTHERS THEN\n        ROLLBACK;\n        RETURN 'Error updating order: ' || SQLERRM;\nEND;\n/",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n3. Register both as tools.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nBEGIN\n    DBMS_CLOUD_AI_AGENT.CREATE_TOOL(\n        tool_name   => 'ORDER_LOOKUP_TOOL',\n        attributes  => '{\"instruction\": \"Look up order status and details by order ID. Parameter: P_ORDER_ID (the order number, e.g. 12345). Use this to check current order status before making updates.\",\n                        \"function\": \"lookup_order\"}',\n        description => 'Retrieves order status, customer, amount, and date by order ID'\n    );\nEND;\n/\n\nBEGIN\n    DBMS_CLOUD_AI_AGENT.CREATE_TOOL(\n        tool_name   => 'ORDER_UPDATE_TOOL',\n        attributes  => '{\"instruction\": \"Update an order status. Parameters: P_ORDER_ID (the order number), P_NEW_STATUS (PENDING, SHIPPED, or DELIVERED). Only call this after confirming the current status with ORDER_LOOKUP_TOOL.\",\n                        \"function\": \"update_order_status\"}',\n        description => 'Updates order status to a new value'\n    );\nEND;\n/",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n4. Create an agent with both tools.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nBEGIN\n    DBMS_CLOUD_AI_AGENT.CREATE_AGENT(\n        agent_name  => 'ORDER_AGENT',\n        attributes  => '{\"profile_name\": \"genai\",\n                        \"role\": \"You are an order management agent. You can look up orders and update their status. Always look up an order first before updating it. Never make up order information - always use your tools.\"}',\n        description => 'Agent that can look up and update orders'\n    );\nEND;\n/\n\nBEGIN\n    DBMS_CLOUD_AI_AGENT.CREATE_TASK(\n        task_name   => 'ORDER_TASK',\n        attributes  => '{\"instruction\": \"Help with order inquiries and updates. When asked to check an order, use ORDER_LOOKUP_TOOL. When asked to update an order, first use ORDER_LOOKUP_TOOL to verify current status, then use ORDER_UPDATE_TOOL to make the change. Do not ask clarifying questions - just do it. User request: {query}\",\n                        \"tools\": [\"ORDER_LOOKUP_TOOL\", \"ORDER_UPDATE_TOOL\"]}',\n        description => 'Task for order lookups and updates'\n    );\nEND;\n/\n\nBEGIN\n    DBMS_CLOUD_AI_AGENT.CREATE_TEAM(\n        team_name   => 'ORDER_TEAM',\n        attributes  => '{\"agents\": [{\"name\": \"ORDER_AGENT\", \"task\": \"ORDER_TASK\"}],\n                        \"process\": \"sequential\"}',\n        description => 'Team for order management'\n    );\nEND;\n/",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n## Task 4: See the Agent Coordinate and Act\n\nNow let's see the real power of agents: coordinating multiple tools and making changes.\n\n1. First, check the current status of order 12345.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT order_id, customer, status FROM sample_orders WHERE order_id = '12345';",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\nThe order is currently SHIPPED.\n\n2. Set the team and ask the agent to check and update the order.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nEXEC DBMS_CLOUD_AI_AGENT.SET_TEAM('ORDER_TEAM');\nSELECT AI AGENT Check order 12345 and if it has shipped, mark it as delivered;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n**Observe:** The agent:\n1. Called ORDER_LOOKUP_TOOL to check current status (SHIPPED)\n2. Made a decision based on the result\n3. Called ORDER_UPDATE_TOOL to change it to DELIVERED\n4. Reported what it did\n\nThis is what SELECT AI cannot do: **coordinate multiple steps and take action**.\n\n3. Verify the change actually happened.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT order_id, customer, status FROM sample_orders WHERE order_id = '12345';",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n**The status changed from SHIPPED to DELIVERED.** The agent did not just talk about updating - it actually did it.\n\n4. Try a conditional update that should NOT happen.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT AI AGENT Check order 12346 and if it has shipped, mark it as delivered;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\n**Observe:** The agent looked up order 12346, saw it was PENDING (not SHIPPED), and correctly decided NOT to update it. This is intelligent coordination.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%md\n## Task 5: See What the Agent Did\n\nEvery tool call is logged. Let's see the execution history.\n\n1. Query the tool history.",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nSELECT \n    tool_name,\n    TO_CHAR(start_date, 'HH24:MI:SS') as called_at,\n    SUBSTR(output, 1, 80) as result\nFROM USER_AI_AGENT_TOOL_HISTORY\nORDER BY start_date DESC\nFETCH FIRST 10 ROWS ONLY;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    },
    {
      "text": "%md\nYou can see the sequence: lookup, then update (or just lookup if no update was needed).\n\n## Task 6: When to Use Each Approach\n\n| Approach | Can Access Your Data | Can Modify Data | Can Coordinate Steps |\n|----------|---------------------|-----------------|----------------------|\n| SELECT AI CHAT | No | No | No |\n| SELECT AI | Yes | No | No |\n| SELECT AI AGENT | Yes | Yes | Yes |\n\n**Use zero-shot (SELECT AI CHAT) when:**\n- You need a quick answer from general knowledge\n- No data access is required\n- You want advice or explanation\n\n**Use SELECT AI when:**\n- You need to query your data with natural language\n- Read-only access is sufficient\n- Single-step retrieval\n\n**Use agents (SELECT AI AGENT) when:**\n- The task requires access to your data\n- You need to READ and WRITE data\n- Decisions depend on data (conditional logic)\n- Actions need coordination across multiple tools\n\n## Summary\n\nIn this lab, you directly compared three approaches:\n\n* **SELECT AI CHAT** - Cannot access your data; can only give generic advice\n* **SELECT AI** - Can read your data but cannot modify it\n* **SELECT AI AGENT** - Can read your data, make decisions, and take action\n\nYou watched the agent coordinate: check status → decide → act → report. And you verified the data actually changed.\n\n**Key takeaway:** The difference is not just intelligence—it is action. Zero-shot AI tells you what to do. SELECT AI can read. Agents do the work.\n\n## Learn More\n\n* [DBMS_CLOUD_AI_AGENT Package](https://docs.oracle.com/en/cloud/paas/autonomous-database/serverless/adbsb/dbms-cloud-ai-agent-package.html)\n\n## Acknowledgements\n\n* **Author** - David Start\n* **Last Updated By/Date** - David Start, January 2026",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%md\n## Cleanup (Optional)",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "md" } }
    },
    {
      "text": "%script\nEXEC DBMS_CLOUD_AI_AGENT.DROP_TEAM('ORDER_TEAM', TRUE);\nEXEC DBMS_CLOUD_AI_AGENT.DROP_TASK('ORDER_TASK', TRUE);\nEXEC DBMS_CLOUD_AI_AGENT.DROP_AGENT('ORDER_AGENT', TRUE);\nEXEC DBMS_CLOUD_AI_AGENT.DROP_TOOL('ORDER_LOOKUP_TOOL', TRUE);\nEXEC DBMS_CLOUD_AI_AGENT.DROP_TOOL('ORDER_UPDATE_TOOL', TRUE);\nDROP TABLE sample_orders PURGE;\nDROP FUNCTION lookup_order;\nDROP FUNCTION update_order_status;",
      "config": { "colWidth": 12.0, "enabled": true, "results": {}, "editorSetting": { "language": "sql" } }
    }
  ],
  "name": "Lab 2 - Agents vs Zero Shot",
  "id": "lab2-agents-vs-zero-shot",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {},
  "config": { "isZeppelinNotebookCronEnable": false },
  "info": {}
}